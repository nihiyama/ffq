version: "3"

tasks:

  test:
    desc: run go test without ent
    dir: "{{.ROOT_DIR}}"
    cmds:
      - chmod 111 testdata/utils/read_index/ffq/index_invalid_permission
      - go test -v -coverprofile=coverage.out $(go list ./... | grep -v "examples")
      - go tool cover -func=coverage.out
      - chmod 644 testdata/utils/read_index/ffq/index_invalid_permission
    silent: true
